<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        .container {
            border-radius: 5px;
            background-color: #f2f2f2;
            padding: 20px;
        }

        .inner {
            width: 90%;
            margin: 0 auto;
        }

        .wrapper {
            display: flex;
        }

        .wrapper > div {
            /* font-size: 4vh; */
            color: white;
            background: black;
            margin: .1em;
            padding-left: 1em;
            /* border-radius: 3px; */
            flex: 1;
        }

        .menu {
            padding: 1em;
        }

        .menu > a {
            color: white;
            text-decoration: none;
            padding-left: 1em;
        }

        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }
    </style>
</head>

<body>

    <div class="wrapper">
        <div class="menu">
            <a href="/">Home</a>
            <a href="/comment/">Comment</a>
            <a href="/view/">View</a>
            <a href="/stat/">Stat</a>
        </div>
    </div>

    <div class="container">
        <div class="inner">

          <table>
            <tr>
              <th>№</th>
              <th>Комментарий</th>
              <th>Дата</th>
              <th>Автор</th>
              <th>Действия</th>
            </tr>
            <tbody id="tbody">
            <!-- <tr>
              <td>Alfreds Futterkiste</td>
              <td>Maria Anders</td>
              <td>Germany</td>
            </tr> -->

          </tbody>
          </table>

        </div>
    </div>

    <script>

        var fill_table = function() {
            var xhttp = new XMLHttpRequest();
            xhttp.responseType = "json";
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {

                    var data = this.response;

                    var el = document.getElementById('tbody');
                    for (var i in data) {
                        var inner_html = "<tr><td>"+i+"</td><td>"+data[i][0]+"</td><td>"+data[i][1]+"</td><td>"+data[i][2]+" "+data[i][3]+"</td><td>actions</td></tr>";
                        el.innerHTML += inner_html;
                    }

                }
            };
            xhttp.open("GET", "/api/comments/get/?withnames=1", true);
            xhttp.send();
        }

        // scan the page for labels, and assign a reference to the label from the actual form element
        // var labels = document.getElementsByTagName('LABEL');
        // for (var i = 0; i < labels.length; i++) {
        //     if (labels[i].htmlFor != '') {
        //         var el = document.getElementById(labels[i].htmlFor);
        //         if (el)
        //             el.label = labels[i];
        //     }
        // }
        // var validate_phone = function(phone) {
        //     var re = /^\({1}[0-9]{3,4}\){1}[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;
        //     return re.test(String(phone).toLowerCase());
        // }
        //
        // var validate_email = function(email) {
        //     var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        //     return re.test(String(email).toLowerCase());
        // }
        //
        // var email_onkeyup = function(e) {
        //     if (validate_email(e.target.value)) {
        //         e.target.label.classList.replace('invalid', 'valid');
        //     } else {
        //         e.target.label.classList.replace('valid', 'invalid');
        //     }
        // }
        //
        // var phone_onkeyup = function(e) {
        //     if (validate_phone(e.target.value)) {
        //         e.target.label.classList.replace('invalid', 'valid');
        //     } else {
        //         e.target.label.classList.replace('valid', 'invalid');
        //     }
        // }
        //
        // var text_onkeyup = function(e) {
        //     if (e.target.value.length >= 3) {
        //         e.target.label.classList.replace('invalid', 'valid');
        //     } else {
        //         e.target.label.classList.replace('valid', 'invalid');
        //     }
        // }

        window.onload = function() {

            console.log('page loaded');
            fill_table();

        }
    </script>
</body>

</html>
